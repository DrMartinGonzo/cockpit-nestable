!function(e){var t={};function i(s){if(t[s])return t[s].exports;var a=t[s]={i:s,l:!1,exports:{}};return e[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(s,a,function(t){return e[t]}.bind(null,a));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=2)}([function(e,t){e.exports=riot},function(e,t,i){var s=i(0);s.tag2("cp-nestable-item",'<div class="uk-panel-box uk-panel-card" onmouseover="{onmousehover}" onmouseout="{onmousehover}"> <div class="uk-flex uk-flex-middle"> <a onclick="{toggleVisibility}" class="uk-badge uk-display-block uk-text-left uk-flex-item-1 {!visibility && opts.mode === \'edit\' && \'uk-text-muted\'} {!visibility && \'uk-badge-outline\'}" riot-style="{opts.mode === \'sort\' && \'color:currentColor;\'}{!visibility && \'border-color: rgba(0,0,0,0)\'}"> <i class="uk-icon-ellipsis-v uk-margin-small-left uk-margin-small-right"></i> {App.Utils.ucfirst(typeof(item.field) == \'string\' ? item.field : (item.field.label || item.field.type))} {_getDisplay(\'display\')} </a> <a show="{opts.mode === \'edit\'}" onclick="{toggleVisibility}" class="uk-margin-left"><i class="uk-icon-eye{visibility && \'-slash uk-text-muted\'}"></i ></a> <a show="{opts.mode === \'edit\'}" onclick="{remove}" class="uk-margin-left"><i class="uk-icon-trash-o uk-text-danger"></i ></a> <span show="{opts.mode === \'sort\'}" class="uk-text-muted uk-text-small uk-text-truncate"> {_getDisplay(\'display_alt\')} </span> </div> <div if="{visibility}" class="uk-margin"> <cp-field type="{item.field.type || \'text\'}" bind="item.value" opts="{item.field.options || {}}"></cp-field> </div> </div> <ul if="{item.children}" class="uk-nestable-list"> <li each="{item, idx in item.children}" ref="items" data-is="cp-nestable-item" data-id="item_{parent.opts.dataId.slice(5) + \'-\' + idx}" mode="{parent.opts.mode}" class="uk-nestable-item"></li> </ul>',"cp-nestable-item .uk-nestable-list,[data-is=\"cp-nestable-item\"] .uk-nestable-list,cp-nestable-item .uk-nestable-list .uk-nestable-item,[data-is=\"cp-nestable-item\"] .uk-nestable-list .uk-nestable-item{ position: relative; } cp-nestable-item .uk-nestable-list:before,[data-is=\"cp-nestable-item\"] .uk-nestable-list:before,cp-nestable-item .uk-nestable-list .uk-nestable-item:before,[data-is=\"cp-nestable-item\"] .uk-nestable-list .uk-nestable-item:before{ content: ''; position: absolute; z-index: -1; border: 0 solid #ddd; pointer-events: none; } cp-nestable-item > .uk-nestable-list:before,[data-is=\"cp-nestable-item\"] > .uk-nestable-list:before{ border-left-width: 1px; left: 2px; top: -6px; height: 36px; } cp-nestable-item .uk-nestable-list .uk-nestable-item:before,[data-is=\"cp-nestable-item\"] .uk-nestable-list .uk-nestable-item:before{ border-top-width: 1px; border-left-width: 1px; top: 30px; left: -18px; bottom: -40px; right: 100%; width: 13px; margin-right: 4px; } cp-nestable-item > .uk-nestable-list > .uk-nestable-item:last-child:before,[data-is=\"cp-nestable-item\"] > .uk-nestable-list > .uk-nestable-item:last-child:before{ border-left-color: transparent !important; } cp-nestable-item.uk-parent--active > .uk-nestable-list:before,[data-is=\"cp-nestable-item\"].uk-parent--active > .uk-nestable-list:before,cp-nestable-item.uk-parent--active > .uk-nestable-list > .uk-nestable-item:before,[data-is=\"cp-nestable-item\"].uk-parent--active > .uk-nestable-list > .uk-nestable-item:before{ border-color: #1abc9c; } cp-nestable-item .uk-icon-ellipsis-v:before,[data-is=\"cp-nestable-item\"] .uk-icon-ellipsis-v:before{ display: inline-block; transform-origin: 100% 50%; transition: transform 100ms; } cp-nestable-item[mode='sort'] .uk-icon-ellipsis-v:before,[data-is=\"cp-nestable-item\"][mode='sort'] .uk-icon-ellipsis-v:before{ transform: scaleX(5); } cp-nestable-item[mode='sort'] > .uk-panel-card,[data-is=\"cp-nestable-item\"][mode='sort'] > .uk-panel-card{ cursor: move; transition: transform 100ms, box-shadow 100ms; } html:not(.uk-nestable-moving) cp-nestable-item[mode='sort'] > .uk-panel-card:hover,html:not(.uk-nestable-moving) [data-is=\"cp-nestable-item\"][mode='sort'] > .uk-panel-card:hover{ box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.22); transform: translateY(-1px); } cp-nestable-item.uk-nestable-item[mode='sort']:not(.uk-nestable-placeholder),[data-is=\"cp-nestable-item\"].uk-nestable-item[mode='sort']:not(.uk-nestable-placeholder){ animation: lol 200ms ease-out both; } ul.uk-nestable-dragged cp-nestable-item.uk-nestable-item[mode='sort'],ul.uk-nestable-dragged [data-is=\"cp-nestable-item\"].uk-nestable-item[mode='sort']{ animation: none; } cp-nestable-item ul .uk-nestable-item[mode='sort'],[data-is=\"cp-nestable-item\"] ul .uk-nestable-item[mode='sort']{ animation-delay: 75ms; } cp-nestable-item ul ul .uk-nestable-item[mode='sort'],[data-is=\"cp-nestable-item\"] ul ul .uk-nestable-item[mode='sort']{ animation-delay: 150ms; } cp-nestable-item ul ul ul .uk-nestable-item[mode='sort'],[data-is=\"cp-nestable-item\"] ul ul ul .uk-nestable-item[mode='sort']{ animation-delay: 225ms; } cp-nestable-item ul ul ul ul .uk-nestable-item[mode='sort'],[data-is=\"cp-nestable-item\"] ul ul ul ul .uk-nestable-item[mode='sort']{ animation-delay: 300ms; } cp-nestable-item .uk-parent--active .uk-nestable-item[mode='sort'],[data-is=\"cp-nestable-item\"] .uk-parent--active .uk-nestable-item[mode='sort']{ animation-delay: 0s !important; } @keyframes lol { 0% { transform: translate(-2px, -2px); opacity: 0.5; pointer-events: none; } }","",function(e){this.isActiveParent=!1,this.visibility=null===this.item.value,this.item.value=this.item.value||{},this.remove=this.parent.remove,s.util.bind(this),this.on("mount",()=>this._toggleRootClasses()),this.on("update",()=>this._toggleRootClasses()),this.onmousehover=(e=>{if(e.preventUpdate=!0,document.documentElement.classList.contains("uk-nestable-moving"))return;const t=this._getParentTagFromDOM();t&&t.setActive("mouseover"===e.type)}),this.toggleVisibility=(()=>{"sort"!==e.mode&&(this.visibility=!this.visibility)}),this.setActive=(e=>{this.isActiveParent=e,this.update()}),this._getDisplay=(e=>{const t=this.item,i=this._getRootParentTag(),s=this.opts.dataId.replace("_"," ");if(t.field&&t.field.type&&t.field.options&&(i.opts[e]||t.field.options[e])){let a;const l=i.opts[e]||t.field.options[e];return(a="$value"==t.field.options[e]?t.value:_.get(t.value,l))?App.Utils.renderValue(t.field.type,a):s}return s}),this._getParentTagFromDOM=(()=>{const e=this.root.parentElement.parentElement;if("cp-nestable-item"===e.getAttribute("data-is"))return e._tag}),this._getRootParentTag=(()=>{let e=this;for(;(e=e.parent)&&"field-nestable"!=e.root.getAttribute("data-is"););return e}),this._toggleRootClasses=(()=>{this.root.classList.toggle("uk-parent--active",!0===this.isActiveParent),this.root.classList.toggle("uk-nestable-nodrag","edit"===e.mode)})})},function(e,t,i){"use strict";i.r(t);i(1);function s(e){let t=0;return e.forEach(function e(i){t+=1,i.children&&i.children.forEach(e)}),t}var a=i(0);a.tag2("field-nestable",'<div class="uk-alert" show="{!items.length}"> {App.i18n.get(\'No items\')}. </div> <ul ref="itemscontainer" class="uk-nestable" show="{items.length}"> <li each="{item, idx in items}" ref="items" data-is="cp-nestable-item" data-id="item_{idx}" mode="{mode}" class="uk-nestable-item"></li> </ul> <div class="uk-margin"> <a class="uk-button" onclick="{add}" show="{mode === \'edit\'}"><i class="uk-icon-plus-circle"></i> {App.i18n.get(\'Add item\')}</a > <a class="uk-button uk-button-success" onclick="{updateorder}" show="{mode === \'sort\'}"><i class="uk-icon-check"></i> {App.i18n.get(\'Update order\')}</a > <a class="uk-button uk-button-link uk-link-reset" onclick="{switchmode}" show="{totalItems > 1}"> <span show="{mode === \'edit\'}"><i class="uk-icon-arrows"></i> {App.i18n.get(\'Reorder\')}</span> <span show="{mode === \'sort\'}">{App.i18n.get(\'Cancel\')}</span> </a> </div>','field-nestable .uk-nestable-placeholder:after,[data-is="field-nestable"] .uk-nestable-placeholder:after{ border-color: #7ed7c4 !important; background: #edf6f4; }',"",function(e){const t=this;this.mode="edit",this.items=[],this.totalItems=0,this.field={type:"text"},a.util.bind(this),this.on("mount",()=>{this.field=e.field||{type:"text"},this.nestable=function(e){const t=UIkit.nestable(e,{});let i;return e.on("move.uk.nestable",()=>{const e=t.placeEl[0]._tag._getParentTagFromDOM();i&&i.setActive(!1),e&&(e.setActive(!0),i=e)}),t}(App.$(this.refs.itemscontainer)),this.update()}),this.on("update",()=>{this.totalItems=s(this.items)}),this.$updateValue=((e,t)=>{Array.isArray(e)||(e=[]),JSON.stringify(this.items)!==JSON.stringify(e)&&(this.items=e,this.update())}),this.add=(t=>{if(e.limit&&this.totalItems>=e.limit)return App.ui.notify("Maximum amount of items reached");this.items.push({field:this.field,value:null}),this.$setValue(this.items)}),this.remove=(e=>{const i=e.item.item;let s=0,a=!1,l=0,n=this.items;this.items.some(function e(o){if(o===i&&(l=s,a=!0),a)return!0;o.children?(l=s,s=0,n=o,o.children.some(e)):(n=t.items,s+=1)}),n.children?(n.children.splice(l,1),n.children.length||delete n.children):n.splice(l,1),this.update()}),this.updateorder=(()=>{const e=this.nestable.serialize().map(function e(t){const i=document.querySelector(`.uk-nestable-item[data-id='${t.id}']`)._tag.item;return t.children?i.children=t.children.map(e):i.children&&delete i.children,i});this._forceRenderItemsWith(e),this.mode="edit",this.$setValue(e)}),this.switchmode=(e=>{this.mode="edit"==this.mode?"sort":"edit",function e(t){App.$(t.refs.items).each((t,i)=>{i.visibility=!1,e(i)})}(t),"edit"==this.mode&&this._forceRenderItemsWith(this.items)}),this._forceRenderItemsWith=(e=>{this.update({items:[]}),this.items=e})}),App.Utils.renderer.nestable=function(e){const t=Array.isArray(e)?s(e):0;return'<span class="uk-badge">'+t+(1==t?" Item":" Items")+"</span>"}}]);